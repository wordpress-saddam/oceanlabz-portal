{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/officedesign/Documents/projects/oceanlabz-portal/lib/api.js"],"sourcesContent":["// API Configuration\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\n\n// API Client\nclass ApiClient {\n    constructor(baseURL) {\n        this.baseURL = baseURL;\n    }\n\n    async request(endpoint, options = {}) {\n        const url = `${this.baseURL}${endpoint}`;\n        const config = {\n            ...options,\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n\n            // Try to parse JSON response\n            let data;\n            try {\n                data = await response.json();\n            } catch (jsonError) {\n                // If JSON parsing fails, throw a generic error\n                throw new Error('Server returned an invalid response');\n            }\n\n            // Check if response is not OK (4xx, 5xx errors)\n            if (!response.ok) {\n                // Handle validation errors from Laravel\n                if (data.errors) {\n                    const firstError = Object.values(data.errors)[0];\n                    throw new Error(Array.isArray(firstError) ? firstError[0] : firstError);\n                }\n                throw new Error(data.message || 'An error occurred');\n            }\n\n            return data;\n        } catch (error) {\n            // Network errors (CORS, connection refused, etc.)\n            if (error.name === 'TypeError' && error.message.includes('fetch')) {\n                throw new Error('Unable to connect to server. Please check if the backend is running.');\n            }\n            // Re-throw other errors\n            throw error;\n        }\n    }\n\n    async get(endpoint, options = {}) {\n        return this.request(endpoint, { ...options, method: 'GET' });\n    }\n\n    async post(endpoint, body, options = {}) {\n        return this.request(endpoint, {\n            ...options,\n            method: 'POST',\n            body: JSON.stringify(body),\n        });\n    }\n}\n\nconst apiClient = new ApiClient(API_BASE_URL);\n\n// Authentication API\nexport const authApi = {\n    /**\n     * Register a new user\n     * @param {Object} userData - User registration data\n     * @param {string} userData.name - User's full name\n     * @param {string} userData.email - User's email\n     * @param {string} userData.password - User's password\n     * @param {string} userData.password_confirmation - Password confirmation\n     * @param {string} [userData.role] - User role (admin or subscriber)\n     * @returns {Promise<Object>} Response with user data and token\n     */\n    async register(userData) {\n        return apiClient.post('/api/register', userData);\n    },\n\n    /**\n     * Login user\n     * @param {string} email - User's email\n     * @param {string} password - User's password\n     * @returns {Promise<Object>} Response with user data and token\n     */\n    async login(email, password) {\n        return apiClient.post('/api/login', { email, password });\n    },\n\n    /**\n     * Logout user\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response confirming logout\n     */\n    async logout(token) {\n        return apiClient.post('/api/logout', {}, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Get authenticated user\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with user data\n     */\n    async getUser(token) {\n        return apiClient.get('/api/user', {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Request password reset\n     * @param {string} email - User's email\n     * @returns {Promise<Object>} Response with reset link\n     */\n    async forgotPassword(email) {\n        return apiClient.post('/api/forgot-password', { email });\n    },\n\n    /**\n     * Reset password with token\n     * @param {string} email - User's email\n     * @param {string} token - Reset token\n     * @param {string} password - New password\n     * @param {string} password_confirmation - Password confirmation\n     * @returns {Promise<Object>} Response confirming password reset\n     */\n    async resetPassword(email, token, password, password_confirmation) {\n        return apiClient.post('/api/reset-password', {\n            email,\n            token,\n            password,\n            password_confirmation\n        });\n    },\n\n    /**\n     * Get all users (admin only)\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with users array\n     */\n    async getAllUsers(token) {\n        return apiClient.get('/api/users', {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Get user by ID\n     * @param {number} id - User ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with user data\n     */\n    async getUserById(id, token) {\n        return apiClient.get(`/api/users/${id}`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Update user\n     * @param {number} id - User ID\n     * @param {Object} userData - User data to update\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with updated user data\n     */\n    async updateUser(id, userData, token) {\n        return apiClient.request(`/api/users/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(userData),\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Delete user\n     * @param {number} id - User ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response confirming deletion\n     */\n    async deleteUser(id, token) {\n        return apiClient.request(`/api/users/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n};\n\n// Cookie utilities\nexport const cookieUtils = {\n    /**\n     * Set a cookie\n     * @param {string} name - Cookie name\n     * @param {string} value - Cookie value\n     * @param {number} days - Expiration in days\n     */\n    set(name, value, days = 1) {\n        const maxAge = days * 24 * 60 * 60;\n        document.cookie = `${name}=${value}; path=/; max-age=${maxAge}`;\n    },\n\n    /**\n     * Get a cookie value\n     * @param {string} name - Cookie name\n     * @returns {string|null} Cookie value or null\n     */\n    get(name) {\n        const value = `; ${document.cookie}`;\n        const parts = value.split(`; ${name}=`);\n        if (parts.length === 2) return parts.pop().split(';').shift();\n        return null;\n    },\n\n    /**\n     * Delete a cookie\n     * @param {string} name - Cookie name\n     */\n    delete(name) {\n        document.cookie = `${name}=; path=/; max-age=0`;\n    },\n\n    /**\n     * Clear all auth cookies\n     */\n    clearAuth() {\n        this.delete('token');\n        this.delete('role');\n        this.delete('userName');\n    },\n};\n\n// Validation functions (keep existing ones)\nexport function validateEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n\nexport function validatePassword(password) {\n    return password.length >= 8;\n}\n\n// Audio Categories API\nexport const audioCategoryApi = {\n    /**\n     * Get all audio categories\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with categories array\n     */\n    async getAll(token) {\n        return apiClient.get('/api/audio-categories', {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Create a new audio category\n     * @param {Object} categoryData - Category data\n     * @param {string} categoryData.name - Category name\n     * @param {string} [categoryData.icon] - Category icon emoji\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with created category\n     */\n    async create(categoryData, token) {\n        return apiClient.post('/api/admin/audio-categories', categoryData, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Update an audio category\n     * @param {number} id - Category ID\n     * @param {Object} categoryData - Category data to update\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with updated category\n     */\n    async update(id, categoryData, token) {\n        return apiClient.request(`/api/admin/audio-categories/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(categoryData),\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Delete an audio category\n     * @param {number} id - Category ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response confirming deletion\n     */\n    async delete(id, token) {\n        return apiClient.request(`/api/admin/audio-categories/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n};\n\n// Audio Tracks API\nexport const audioTrackApi = {\n    /**\n     * Get all audio tracks\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with tracks array\n     */\n    async getAll(token) {\n        return apiClient.get('/api/audio-tracks', {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Get a single audio track by ID\n     * @param {number} id - Track ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with track data\n     */\n    async getById(id, token) {\n        return apiClient.get(`/api/audio-tracks/${id}`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Create a new audio track with file upload\n     * @param {FormData} formData - FormData containing track data and audio file\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with created track\n     */\n    async create(formData, token) {\n        const url = `${API_BASE_URL}/api/admin/audio-tracks`;\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Accept': 'application/json',\n            },\n            body: formData,\n        });\n\n        let data;\n        try {\n            data = await response.json();\n        } catch (jsonError) {\n            throw new Error('Server returned an invalid response');\n        }\n\n        if (!response.ok) {\n            if (data.errors) {\n                const firstError = Object.values(data.errors)[0];\n                throw new Error(Array.isArray(firstError) ? firstError[0] : firstError);\n            }\n            throw new Error(data.message || 'An error occurred');\n        }\n\n        return data;\n    },\n\n    /**\n     * Update an audio track (supports file upload)\n     * @param {number} id - Track ID\n     * @param {FormData} formData - FormData containing track data and optional audio file\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with updated track\n     */\n    async update(id, formData, token) {\n        const url = `${API_BASE_URL}/api/admin/audio-tracks/${id}`;\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Accept': 'application/json',\n            },\n            body: formData,\n        });\n\n        let data;\n        try {\n            data = await response.json();\n        } catch (jsonError) {\n            throw new Error('Server returned an invalid response');\n        }\n\n        if (!response.ok) {\n            if (data.errors) {\n                const firstError = Object.values(data.errors)[0];\n                throw new Error(Array.isArray(firstError) ? firstError[0] : firstError);\n            }\n            throw new Error(data.message || 'An error occurred');\n        }\n\n        return data;\n    },\n\n    /**\n     * Delete an audio track\n     * @param {number} id - Track ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response confirming deletion\n     */\n    async delete(id, token) {\n        return apiClient.request(`/api/admin/audio-tracks/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n};\n\n// Location Device API\nexport const locationDeviceApi = {\n    /**\n     * Get all location devices\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with devices array\n     */\n    async getAll(token) {\n        return apiClient.get('/api/location-devices', {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Get a single location device by ID\n     * @param {number} id - Device ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with device data\n     */\n    async getById(id, token) {\n        return apiClient.get(`/api/location-devices/${id}`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Create a new location device\n     * @param {Object} deviceData - Device data\n     * @param {string} deviceData.name - Device name\n     * @param {string} deviceData.type - Device type\n     * @param {number} deviceData.user_id - User ID to assign device to\n     * @param {string} [deviceData.status] - Device status (Active/Inactive)\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with created device\n     */\n    async create(deviceData, token) {\n        return apiClient.post('/api/admin/location-devices', deviceData, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Update a location device\n     * @param {number} id - Device ID\n     * @param {Object} deviceData - Device data to update\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with updated device\n     */\n    async update(id, deviceData, token) {\n        return apiClient.request(`/api/admin/location-devices/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(deviceData),\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Delete a location device\n     * @param {number} id - Device ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response confirming deletion\n     */\n    async delete(id, token) {\n        return apiClient.request(`/api/admin/location-devices/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n\n    /**\n     * Toggle device status (Active/Inactive)\n     * @param {number} id - Device ID\n     * @param {string} token - Authentication token\n     * @returns {Promise<Object>} Response with updated device\n     */\n    async toggleStatus(id, token) {\n        return apiClient.request(`/api/admin/location-devices/${id}/toggle`, {\n            method: 'PATCH',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        });\n    },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///Users/officedesign/Documents/projects/oceanlabz-portal/app/login/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { authApi, cookieUtils, validateEmail } from \"@/lib/api\";\n\nexport default function Login() {\n    const router = useRouter();\n    const [formData, setFormData] = useState({\n        email: \"\",\n        password: \"\",\n        rememberMe: false\n    });\n    const [errors, setErrors] = useState({});\n    const [isLoading, setIsLoading] = useState(false);\n    const [loginError, setLoginError] = useState(\"\");\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === \"checkbox\" ? checked : value\n        }));\n        // Clear error when user starts typing\n        if (errors[name]) {\n            setErrors(prev => ({ ...prev, [name]: \"\" }));\n        }\n        setLoginError(\"\");\n    };\n\n    const validateForm = () => {\n        const newErrors = {};\n\n        if (!formData.email) {\n            newErrors.email = \"Email is required\";\n        } else if (!validateEmail(formData.email)) {\n            newErrors.email = \"Invalid email format\";\n        }\n\n        if (!formData.password) {\n            newErrors.password = \"Password is required\";\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        setLoginError(\"\");\n\n        if (!validateForm()) {\n            return;\n        }\n\n        setIsLoading(true);\n\n        try {\n            const result = await authApi.login(formData.email, formData.password);\n\n            if (result.success) {\n                const { user, access_token } = result.data;\n\n                // Set cookies for authentication\n                cookieUtils.set('token', access_token, formData.rememberMe ? 7 : 1);\n                cookieUtils.set('role', user.role, formData.rememberMe ? 7 : 1);\n                cookieUtils.set('userName', user.name, formData.rememberMe ? 7 : 1);\n\n                // Redirect based on role\n                if (user.role === \"admin\") {\n                    router.push(\"/admin\");\n                } else {\n                    router.push(\"/dashboard\");\n                }\n            }\n        } catch (error) {\n            setLoginError(error.message || \"Invalid email or password\");\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-[#0a0a0a] via-[#1a1a1a] to-[#0a0a0a] flex items-center justify-center p-4 animate-fadeIn\">\n            {/* Background decoration */}\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n                <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse-slow\"></div>\n                <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse-slow\" style={{ animationDelay: \"1s\" }}></div>\n            </div>\n\n            {/* Login Card */}\n            <div className=\"relative w-full max-w-md animate-slideUp\">\n                <div className=\"bg-gradient-to-br from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-[#3a3a3a] p-8 shadow-2xl backdrop-blur-xl\">\n                    {/* Logo/Header */}\n                    <div className=\"text-center mb-8\">\n                        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-2\">\n                            OceanLabz\n                        </h1>\n                        <p className=\"text-[#9a9a9a]\">Sign in to your account</p>\n                    </div>\n\n                    {/* Login Error */}\n                    {loginError && (\n                        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg animate-slideUp\">\n                            <p className=\"text-red-400 text-sm flex items-center gap-2\">\n                                <span>‚ö†Ô∏è</span>\n                                {loginError}\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Form */}\n                    <form onSubmit={handleLogin} className=\"space-y-6\">\n                        {/* Email Field */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-[#9a9a9a] mb-2\">\n                                Email Address\n                            </label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-xl\">üìß</span>\n                                <input\n                                    type=\"email\"\n                                    name=\"email\"\n                                    value={formData.email}\n                                    onChange={handleChange}\n                                    className={`w-full bg-[#0a0a0a] border ${errors.email ? \"border-red-500\" : \"border-[#3a3a3a]\"\n                                        } rounded-lg px-12 py-3 text-white placeholder-[#6a6a6a] focus:outline-none focus:border-blue-500 smooth-transition`}\n                                    placeholder=\"you@example.com\"\n                                />\n                            </div>\n                            {errors.email && (\n                                <p className=\"text-red-400 text-xs mt-1\">{errors.email}</p>\n                            )}\n                        </div>\n\n                        {/* Password Field */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-[#9a9a9a] mb-2\">\n                                Password\n                            </label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-xl\">üîí</span>\n                                <input\n                                    type=\"password\"\n                                    name=\"password\"\n                                    value={formData.password}\n                                    onChange={handleChange}\n                                    className={`w-full bg-[#0a0a0a] border ${errors.password ? \"border-red-500\" : \"border-[#3a3a3a]\"\n                                        } rounded-lg px-12 py-3 text-white placeholder-[#6a6a6a] focus:outline-none focus:border-blue-500 smooth-transition`}\n                                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                                />\n                            </div>\n                            {errors.password && (\n                                <p className=\"text-red-400 text-xs mt-1\">{errors.password}</p>\n                            )}\n                            <div className=\"text-right mt-2\">\n                                <Link\n                                    href=\"/forgot-password\"\n                                    className=\"text-sm text-blue-500 hover:text-blue-400 smooth-transition\"\n                                >\n                                    Forgot Password?\n                                </Link>\n                            </div>\n                        </div>\n\n                        {/* Remember Me */}\n                        <div className=\"flex items-center justify-between\">\n                            <label className=\"flex items-center gap-2 cursor-pointer\">\n                                <input\n                                    type=\"checkbox\"\n                                    name=\"rememberMe\"\n                                    checked={formData.rememberMe}\n                                    onChange={handleChange}\n                                    className=\"w-4 h-4 rounded border-[#3a3a3a] bg-[#0a0a0a] text-blue-600 focus:ring-blue-500\"\n                                />\n                                <span className=\"text-sm text-[#9a9a9a]\">Remember me</span>\n                            </label>\n                        </div>\n\n                        {/* Login Button */}\n                        <button\n                            type=\"submit\"\n                            disabled={isLoading}\n                            className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:shadow-lg hover:shadow-blue-500/20 smooth-transition hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                        >\n                            {isLoading ? (\n                                <span className=\"flex items-center justify-center gap-2\">\n                                    <span className=\"animate-spin\">‚è≥</span>\n                                    Signing in...\n                                </span>\n                            ) : (\n                                \"Sign In\"\n                            )}\n                        </button>\n                    </form>\n\n                    {/* Divider */}\n                    <div className=\"my-6 flex items-center gap-4\">\n                        <div className=\"flex-1 h-px bg-[#3a3a3a]\"></div>\n                        <span className=\"text-[#6a6a6a] text-sm\">OR</span>\n                        <div className=\"flex-1 h-px bg-[#3a3a3a]\"></div>\n                    </div>\n\n                    {/* Signup Link */}\n                    <p className=\"text-center text-[#9a9a9a]\">\n                        Don't have an account?{\" \"}\n                        <Link href=\"/signup\" className=\"text-blue-500 hover:text-blue-400 smooth-transition font-medium\">\n                            Sign up\n                        </Link>\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}